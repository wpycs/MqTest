# 思路
1. 对方生产某次活动红包后，调用本系统接口、直接查询数据库获取此次活动的所有红包金额记录
2. 按照对方要求的随机次序存入redis的list中，key使用常量+活动标识id，过期时间可设置活动过期时间。
3. redis中创建一个set，key使用常量+活动标识Id,利用set中数据不能重复的特点判定重复抢红包、过期时间可参照上一条设置
4. 活动开始后，请求带着用户标识和活动标识id请求接口，系统先尝试将将用户标识写入redis的set中，如成功则获取list中第一条记录并删除此条记录，此条记录就是用户抢到的红包、返回给用户，并推送到mq中，异步写入数据库
5. 异步阶段，使用windows服务，获取到上一步推送到mq的数据，将其放入一个内存队列
6. windows服务新开一个线程，每秒执行一次，获取队列中最多1000条数据，批量插入数据库中


此方案可做到准实时，用户在查询自己的红包时基本无感知，另外可在文案上参考天猫红包，最迟10分钟发送到账户内
